(function(i,c){typeof exports=="object"&&typeof module!="undefined"?module.exports=c():typeof define=="function"&&define.amd?define(c):(i=i||self,i.autosize=c())})(this,function(){var i=typeof Map=="function"?new Map:function(){var e=[],t=[];return{has:function(r){return e.indexOf(r)>-1},get:function(r){return t[e.indexOf(r)]},set:function(r,l){e.indexOf(r)===-1&&(e.push(r),t.push(l))},delete:function(r){var l=e.indexOf(r);l>-1&&(e.splice(l,1),t.splice(l,1))}}}(),c=function(t){return new Event(t,{bubbles:!0})};try{new Event("test")}catch{c=function(s){var r=document.createEvent("Event");return r.initEvent(s,!0,!1),r}}function y(e){if(!e||!e.nodeName||e.nodeName!=="TEXTAREA"||i.has(e))return;var t=null,s=null,r=null;function l(){var n=window.getComputedStyle(e,null);n.resize==="vertical"?e.style.resize="none":n.resize==="both"&&(e.style.resize="horizontal"),n.boxSizing==="content-box"?t=-(parseFloat(n.paddingTop)+parseFloat(n.paddingBottom)):t=parseFloat(n.borderTopWidth)+parseFloat(n.borderBottomWidth),isNaN(t)&&(t=0),d()}function h(n){{var o=e.style.width;e.style.width="0px",e.style.width=o}e.style.overflowY=n}function E(n){for(var o=[];n&&n.parentNode&&n.parentNode instanceof Element;)n.parentNode.scrollTop&&o.push({node:n.parentNode,scrollTop:n.parentNode.scrollTop}),n=n.parentNode;return o}function a(){if(e.scrollHeight!==0){var n=E(e),o=document.documentElement&&document.documentElement.scrollTop;e.style.height="",e.style.height=e.scrollHeight+t+"px",s=e.clientWidth,n.forEach(function(u){u.node.scrollTop=u.scrollTop}),o&&(document.documentElement.scrollTop=o)}}function d(){a();var n=Math.round(parseFloat(e.style.height)),o=window.getComputedStyle(e,null),u=o.boxSizing==="content-box"?Math.round(parseFloat(o.height)):e.offsetHeight;if(u<n?o.overflowY==="hidden"&&(h("scroll"),a(),u=o.boxSizing==="content-box"?Math.round(parseFloat(window.getComputedStyle(e,null).height)):e.offsetHeight):o.overflowY!=="hidden"&&(h("hidden"),a(),u=o.boxSizing==="content-box"?Math.round(parseFloat(window.getComputedStyle(e,null).height)):e.offsetHeight),r!==u){r=u;var z=c("autosize:resized");try{e.dispatchEvent(z)}catch{}}}var v=function(){e.clientWidth!==s&&d()},p=function(n){window.removeEventListener("resize",v,!1),e.removeEventListener("input",d,!1),e.removeEventListener("keyup",d,!1),e.removeEventListener("autosize:destroy",p,!1),e.removeEventListener("autosize:update",d,!1),Object.keys(n).forEach(function(o){e.style[o]=n[o]}),i.delete(e)}.bind(e,{height:e.style.height,resize:e.style.resize,overflowY:e.style.overflowY,overflowX:e.style.overflowX,wordWrap:e.style.wordWrap});e.addEventListener("autosize:destroy",p,!1),"onpropertychange"in e&&"oninput"in e&&e.addEventListener("keyup",d,!1),window.addEventListener("resize",v,!1),e.addEventListener("input",d,!1),e.addEventListener("autosize:update",d,!1),e.style.overflowX="hidden",e.style.wordWrap="break-word",i.set(e,{destroy:p,update:d}),l()}function g(e){var t=i.get(e);t&&t.destroy()}function w(e){var t=i.get(e);t&&t.update()}var f=null;typeof window=="undefined"||typeof window.getComputedStyle!="function"?(f=function(t){return t},f.destroy=function(e){return e},f.update=function(e){return e}):(f=function(t,s){return t&&Array.prototype.forEach.call(t.length?t:[t],function(r){return y(r)}),t},f.destroy=function(e){return e&&Array.prototype.forEach.call(e.length?e:[e],g),e},f.update=function(e){return e&&Array.prototype.forEach.call(e.length?e:[e],w),e});var m=f;return m});
