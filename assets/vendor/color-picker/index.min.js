/*!
 *
 * The MIT License (MIT)
 *
 * Copyright © 2021 Taufik Nurrohman <https://github.com/taufik-nurrohman>
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the “Software”), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED “AS IS”, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */(function(X,Y){typeof exports=="object"&&typeof module!="undefined"?module.exports=Y():typeof define=="function"&&define.amd?define(Y):(X=typeof globalThis!="undefined"?globalThis:X||self,X.CP=Y())})(this,function(){"use strict";var X=function(t){return Array.isArray(t)},Y=function(t){return typeof t!="undefined"},mt=function(t){return typeof t=="function"},bt=function(t,e){return t&&a(e)&&t instanceof e},Xt=function(t){return t===null},ot=function(t){return typeof t=="number"},K=function(t,e){return e===void 0&&(e=!0),typeof t!="object"?!1:e?bt(t,Object):!0},a=function(t){return Y(t)&&!Xt(t)},q=function(t){return typeof t=="string"},Yt=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Object.assign.apply(Object,[{}].concat(e))},Et=function r(t){if(X(t))return t.map(function(n){return r(t)});if(K(t)){for(var e in t)t[e]=r(t[e]);return t}return t===!1?"false":t===null?"null":t===!0?"true":""+t},Bt=function(t){return t.replace(/[-_.](\w)/g,function(e,n){return It(n)})},It=function(t){return t.toUpperCase()},At=function(t){return t.length},N=function(t,e){return a(e[0])&&t<e[0]?e[0]:a(e[1])&&t>e[1]?e[1]:t},g=function(t,e){return e===void 0&&(e=10),e?parseInt(t,e):parseFloat(t)},Ut=function(t){return At(_t(t))},_t=function(t){return Object.keys(t)},Z=function(t){return ot(t)?Math.round(t):null},Ht=function(t,e){return e===void 0&&(e=10),ot(t)?t.toString(e):""+t},D=document,B=window,ft=D.body,J=D.documentElement,Q=function(t){return t.parentNode||null},Ft=function(t,e){return e in t},zt=function(t){return t===B},Gt=function(t,e){return t.removeAttribute(e),t},Kt=function(t,e){return t.classList.remove(e),t},qt=function(t){var e=Q(t);return t.remove(),e},Zt=function(t,e,n){return n===!0&&(n=e),t.setAttribute(e,Et(n)),t},Jt=function(t,e){var n;for(var u in e)n=e[u],n||n===""||n===0?Zt(t,u,n):Gt(t,u);return t},h=function(t,e){return t.append(e),e},Qt=function(t,e){return t.classList.add(e),t},p=function(t,e,n){return t=q(t)?D.createElement(t):t,K(e)&&(n=e,e=!1),q(e)&&$t(t,e),K(n)&&Jt(t,n),t},$t=function(t,e,n){if(n===void 0&&(n=!0),e===null)return t;var u="innerHTML";return Ft(t,u)&&(t[u]=n?e.trim():e),t},O=function(t,e,n){return ot(n)&&(n+="px"),t.style[Bt(e)]=Et(n),t},xt=function(t,e,n){e.removeEventListener(t,n)},st=function(t){return t&&t.preventDefault()},T=function(t,e,n){t.forEach(function(u){return xt(u,e,n)})},tr=function(t,e,n,u){u===void 0&&(u=!1),e.addEventListener(t,n,u)},L=function(t,e,n,u){u===void 0&&(u=!1),t.forEach(function(o){return tr(o,e,n,u)})};function rr(r){var t={};function e(o,f){return a(t[o])&&t[o].forEach(function(s){return s.apply(r,f)}),r}function n(o,f){if(!a(o))return t={},r;if(a(t[o]))if(a(f)){for(var s=0,d=t[o].length;s<d;++s)if(f===t[o][s]){t[o].splice(s,1);break}j===0&&delete t[o]}else delete t[o];return r}function u(o,f){return a(t[o])||(t[o]=[]),a(f)&&t[o].push(f),r}return r.hooks=t,r.fire=e,r.off=n,r.on=u,r}var lt=function(t,e){var n=t.touches,u=n?n[0].clientX:t.clientX,o=n?n[0].clientY:t.clientY;if(e){var f=E(e);return[u-f[0],o-f[1],f[0],f[1]]}return[u,o]},E=function(t){var e,n,u,o,f,s,d;return zt(t)?(o=t.pageXOffset||J.scrollLeft||ft.scrollLeft,f=t.pageYOffset||J.scrollTop||ft.scrollTop,u=t.innerWidth,e=t.innerHeight):(n=t.getBoundingClientRect(),o=n.left,f=n.top,u=n.width,e=n.height,s=n.right,d=n.bottom),[o,f,u,e,s,d]};const $="HEX",w=["touchstart","mousedown"],Vt=["touchmove","mousemove"],yt=["orientationchange","resize"],Rt=["touchend","mouseup"];let x="CP",er=B.setTimeout;function at(r,t){if(r===t)return r;for(;(r=r.parentElement)&&r!==t;);return r}function tt(r){let t=+r[0],e=+r[1],n=+r[2],u,o,f,s,d,v,H,y;switch(s=Math.floor(t*6),d=t*6-s,v=n*(1-e),H=n*(1-d*e),y=n*(1-(1-d)*e),s=s||0,H=H||0,y=y||0,s%6){case 0:u=n,o=y,f=v;break;case 1:u=H,o=n,f=v;break;case 2:u=v,o=n,f=y;break;case 3:u=v,o=H,f=n;break;case 4:u=y,o=v,f=n;break;case 5:u=n,o=v,f=H;break}return[Z(u*255),Z(o*255),Z(f*255),a(r[3])?+r[3]:1]}function ct(r){let t=+r[0]/255,e=+r[1]/255,n=+r[2]/255,u=Math.max(t,e,n),o=Math.min(t,e,n),f,s,d=u,v=u-o;if(s=u===0?0:v/u,u===o)f=0;else{switch(u){case t:f=(e-n)/v+(e<n?6:0);break;case e:f=(n-t)/v+2;break;case n:f=(t-e)/v+4;break}f/=6}return[f,s,d,a(r[3])?+r[3]:1]}function S(r,t={}){if(!r)return;const e=this;if(!bt(e,S))return new S(r,t);if(r[x])return;let{fire:n,hooks:u}=rr(e);e.state=t=Yt(S.state,q(t)?{color:t}:t||{});function o(){return r.value?S[mt(S[t.color])?t.color:$](r.value||""):[0,0,0,1]}e.source=r,e.visible=!1,S.instances[r.id||r.name||Ut(S.instances)]=e,r[x]=1;let f=t.class,s,d,v,H,y=()=>r.disabled,Ot=()=>r.readOnly,C=o(),A=ct(C),b=p("div",{class:f}),rt=p("div"),V=p("div",{class:f+":sv"}),k=p("div",{class:f+":h"}),R=p("div",{class:f+":a"}),wt=p("div"),nr=p("div"),ir=p("div"),et=p("i"),ur=p("div"),vt=p("i"),kt=p("div"),or=p("div"),dt=p("i"),gt=0,ht=0,pt=0,M=0,W=0,P=0;h(b,rt),h(rt,V),h(rt,k),h(rt,R),h(V,wt),h(V,nr),h(V,ir),h(V,et),h(k,ur),h(k,vt),h(R,kt),h(R,or),h(R,dt);function Dt(nt,St){A=ct(C=o()),nt||(h(St||t.parent||ft,b),e.visible=!0),s=i=>(y()||Ot()||(Dt(0,i),n("enter",C)),e),d=()=>y()||Ot()?e:(Q(b)&&(qt(b),e.current=null,e.visible=!1),T(w,V,Lt),T(w,k,jt),T(w,R,Ct),T(Vt,D,I),T(Rt,D,Nt),T(yt,B,H),n("exit",C)),v=i=>{let c=E(J),m=E(r),l=E(B),mr=l[3]-J.clientHeight,br=l[2]-c[2],Pt=E(b),Er=Pt[3],Ar=Pt[2],it=m[0]+l[0],ut=m[1]+l[1]+m[3];if(K(i))a(i[0])&&(it=i[0]),a(i[1])&&(ut=i[1]);else{let Hr=l[0],Vr=l[1],yr=l[0]+l[2]-Ar-br,Rr=l[1]+l[3]-Er-mr;it=N(it,[Hr,yr])>>0,ut=N(ut,[Vr,Rr])>>0}return O(b,"left",it),O(b,"top",ut),n("fit",C)},H=()=>v();function Ct(i){e.current=R,pt=P=1,I(i),st(i)}function jt(i){e.current=k,ht=W=1,I(i),st(i)}function Lt(i){e.current=V,gt=M=1,I(i),st(i)}function I(i){M&&ar(i),W&&lr(i),P&&sr(i),C=tt(A),(M||W||P)&&(n(gt||ht||pt?"start":"drag",C),n("change",C)),gt=ht=pt=0}function U(){fr(A);let i=tt(A),c=tt([A[0],1,1]);O(wt,"background-color","rgb("+c[0]+","+c[1]+","+c[2]+")"),O(kt,"background-image","linear-gradient(rgb("+i[0]+","+i[1]+","+i[2]+"),transparent)")}function fr(i){a(i[1])&&O(et,"right",F-pr/2-F*+i[1]),a(i[2])&&O(et,"top",_-hr/2-_*+i[2]),a(i[0])&&O(vt,"top",z-Sr/2-z*+i[0]),a(i[3])&&O(dt,"top",G-Cr/2-G*+i[3])}function sr(i){A[3]=(G-N(lt(i,R)[1],[0,G]))/G,U()}function lr(i){A[0]=(z-N(lt(i,k)[1],[0,z]))/z,U()}function ar(i){let c=lt(i,V),m=N(c[0],[0,F]),l=N(c[1],[0,_]);A[1]=1-(F-m)/F,A[2]=(_-l)/_,U()}function Nt(i){C=tt(A);let c=i.target,m=r===at(c,r),l=b===at(c,b);e.current=null,!m&&!l?u.blur?n("blur",C):M||W||P||Q(b)&&d():l&&(M||W||P)&&n("stop",C),M=W=P=0}let Mt=E(V),Wt=E(et),cr=E(k),vr=E(vt),dr=E(R),gr=E(dt),_=Mt[3],hr=Wt[3],F=Mt[2],pr=Wt[2],z=cr[3],Sr=vr[3],G=dr[3],Cr=gr[3];nt?(L(w,r,Tt),er(()=>{n("change",C)},1)):(L(w,V,Lt),L(w,k,jt),L(w,R,Ct),L(Vt,D,I),L(Rt,D,Nt),L(yt,B,H),v()),U(),e.color=(i,c,m,l)=>S[mt(S[t.color])?t.color:$]([i,c,m,l]),e.current=null,e.enter=s,e.exit=d,e.fit=v,e.get=()=>o(),e.pop=()=>r[x]?(delete r[x],Kt(r,f+"-source"),T(w,r,Tt),d(),n("pop",C)):e,e.set=(i,c,m,l)=>(e._set(i,c,m,l),n("change",[i,c,m,l])),e.self=b,e._set=(i,c,m,l)=>(A=ct([i,c,m,l]),U(),e),Qt(r,f+"-source")}Dt(1);function Tt(nt){if(u.focus)n("focus",C);else{let St=nt.target;r===at(St,r)?!Q(b)&&s(t.parent):d()}}return e}return S[$]=r=>{if(q(r)){let t=At(r=r.trim());if((t===4||t===7)&&r[0]==="#"){if(/^#([a-f\d]{3}){1,2}$/i.test(r))return t===4?[g(r[1]+r[1],16),g(r[2]+r[2],16),g(r[3]+r[3],16),1]:[g(r[1]+r[2],16),g(r[3]+r[4],16),g(r[5]+r[6],16),1]}else if((t===5||t===9)&&r[0]==="#"&&/^#([a-f\d]{3,4}){1,2}$/i.test(r))return t===5?[g(r[1]+r[1],16),g(r[2]+r[2],16),g(r[3]+r[3],16),g(r[4]+r[4],16)/255]:[g(r[1]+r[2],16),g(r[3]+r[4],16),g(r[5]+r[6],16),g(r[7]+r[8],16)/255];return[0,0,0,1]}return"#"+("000000"+Ht(+r[2]|+r[1]<<8|+r[0]<<16,16)).slice(-6)+(a(r[3])&&r[3]<1?Ht(Z(r[3]*255)+65536,16).substr(-2):"")},S.instances={},S.state={class:"color-picker",color:$,parent:null},S.version="2.3.1",S});
